\chapter{丸め誤差・情報落ち・桁落ちについての基礎知識}
前章で述べたように計算機の中では表現できる数に限りがある．
そのため計算機の中で表現できる数はそのままの数で計算を行うが，計算機の中で表現できない数はその数にできるだけ近い表現をできる数を代わりに用いて計算を行うことになる．
ある数$a\ \in \R$に対して,計算機で$a$という数を扱う場合の表現を
\begin{equation}    
    a^{\ast} \ (\in \mathbb{F})
\end{equation}
とする．
また，$a$を$p$進数で表現することを明記する場合，
\begin{equation}
    a_{(p)}
\end{equation}
と表すことにする．
\label{chap:基礎知識2}
\section{丸め誤差}
丸め誤差について説明する．
丸め誤差とは，計算機を用いて数を計算する際に用いる誤差である．
真の値を$x_{\mathrm{true}} \ (\in \R)$とする．
計算機の中で表現できる数で$x_{\mathrm{true}}$に一番近い数を$x^{\ast} \ (\in \mathbb{F})$とすると，そのときの丸め誤差$e_{round}$は，
\begin{equation}
    e_{\mathrm{round}} = x_{\mathrm{true}} - x^{\ast}
\end{equation}
と表せる．
簡単のため，計算機で扱われる2進数ではなく10進数を用いた場合を考える.
例えば，計算機では，小数点２桁までしか表現できないとすると，$\pi$という数は，計算機の中で
\begin{equation}
    \pi^{\ast}_{(10)} = 3.14_{(10)} \ (\in \mathbb{F})
\end{equation}
という数で扱うことになる．
そして，丸め誤差$e_{\mathrm{round}}$は,
\begin{equation}
    {e_{\mathrm{round}}}_{(10)} = \pi - \pi^{\ast} = {0.00159265_{(10)}\dots}
\end{equation}
となる．


$a \in \R$を計算機の中で表現することを考える．ただし，ここでは計算機の中で表現される数は10進数ではなく2進数であるとする．
ただし，浮動小数点で表せる最大の数を${M_{\mathrm{float}}}_{(2)}$，最小の数を${m_{\mathrm{float}}}_{(2)}$，固定小数点で表せる最大の数を${M_{\mathrm{fixed}}}_{(2)}$，最小の数を${m_{\mathrm{fixed}}}_{(2)}$とし，
\begin{align}
   {m_{\mathrm{float}}}_{(2)} &< a_{(2)} < {M_{\mathrm{float}}}_{(2)}, \\
   {m_{\mathrm{fixed}}}_{(2)} &< a_{(2)} < {M_{\mathrm{fixed}}}_{(2)}
\end{align}
とする．
丸め誤差は浮動小数点の場合，$2^{\beta} < a_{(2)} \leq 2^{\beta+1}$である場合，\\
固定小数点の場合，小数部が$m$bitとし，${a^{\ast}}_{(2)} \ (\in\fixnum)$の中で，
\begin{align}
    {a^{\ast}}_{(2)} < a_{(2)}\ \text{かつ} |a_{(2)} - {a^{\ast}}_{(2)}| \ \text{が最小}
\end{align}
となるような数を${a^{\ast}_{\mathrm{small}}}_{(2)}$とする．
たま，
\begin{align}
    {a^{\ast}}_{(2)} > a_{(2)} \ \text{かつ} |a_{(2)} - {a^{\ast}}_{(2)}| \ \text{が最小}
\end{align}
となるような数を${a^{\ast}_{\mathrm{large}}}_{(2)}$とする．
\section{情報落ち}
情報落ちとは，浮動小数点数を用いて計算する際に生じる現象である．
浮動小数点数の仮数部は決められているため，浮動小数点数で絶対値が非常に大きな数と非常に小さな数を足し合わせることを考える．
簡単のため，計算機で扱われる2進数ではなく10進数を用いた場合を考える．
浮動小数点数の仮数部が小数点3桁までしか表現できない場合を考える．
a,bを浮動小数点数で表せる数として，$|a| >> |b|$とする．例えば
\begin{align}
    a &= 1.000 \times 10^{-2} \\
    b &= 1.000 \times 10^{3}
\end{align}
として，
\begin{equation}
    a + b
\end{equation}
を考えると，
\begin{equation}
    a + b = 1.001 \times 10^{-2} + 1.000 \times 10^{3} = 0.01 + 1000 = 1000.01 \backsimeq 1.000 \times 10^{3}
\end{equation}
となり，$a$を足したという情報が失われてしまうことになる．
このような現象を情報落ちという．

\section{桁落ち}
桁落ちとは，浮動小数点数を用いて計算する際に生じる現象である．
浮動小数点で絶対値が非常に近い２つの数を引くことを考える．
簡単のため，計算機で扱われる2進数はなく10進数を用いた場合を考える．
浮動小数点数の仮数部が小数点3桁までしか表現できない場合を考える．
a,bを浮動小数点数で表せる数として，$|a - b| << 1$とする．
例えば，
\begin{align}
    a &= 1.234 \times 10^{-2} \\
    b &= 1.233 \times 10^{-2}
\end{align}
として，
\begin{equation}
    a - b
\end{equation}
を考えると，
\begin{align}
    a - b = 1.234 \times 10^{-2} - 1.233 \times 10^{-2} = 0.01234 - 0.01233 = 0.00001 = 1.000 \times 10^{-5}
\end{align}
となり，計算前の$a,b$は仮数部に4桁の情報があったのに対し，計算後の$a-b$の結果は仮数部の情報が1桁になってしまっている．
このような現象を桁落ちという．